/*! jquery.fillcolor 2017-06-29 */

!function(a){"use strict";var t={avg:function(a){for(var t={r:0,g:0,b:0},r=0,e=4*Math.ceil(a.data.length/4e4),n=0;n<a.data.length;n+=e)255===a.data[n]&&255===a.data[n+1]&&255===a.data[n+2]||(t.r+=a.data[n],t.g+=a.data[n+1],t.b+=a.data[n+2],r++);return t.r=Math.round(t.r/r),t.g=Math.round(t.g/r),t.b=Math.round(t.b/r),t},avgYUV:function(a){for(var t={r:0,g:0,b:0},r={y:0,u:0,v:0},e=0,n=4*Math.ceil(a.data.length/4e4),o=function(a){return a/(Math.abs(a)+.4)},g=0;g<a.data.length;g+=n)255===a.data[g]&&255===a.data[g+1]&&255===a.data[g+2]||(t.r=a.data[g]/255,t.g=a.data[g+1]/255,t.b=a.data[g+2]/255,r.y+=.299*t.r+.587*t.g+.114*t.b,r.u+=-.147*t.r-.289*t.g+.436*t.b,r.v+=.615*t.r-.515*t.g-.1*t.b,e++);return r.y=o(r.y/e),r.u=o(r.u/e),r.v=o(r.v/e),t.r=r.y+1.3983*r.v,t.g=r.y-.3946*r.u-.5806*r.v,t.b=r.y+2.0321*r.u,t.r=Math.round(255*t.r),t.g=Math.round(255*t.g),t.b=Math.round(255*t.b),t}};a.fn.fillColor=function(r){var e=a("body"),n=a.extend({type:"avg"},r);return this.each(function(){var r=a(this),o=a("img",r).eq(0),g=a("<img/>");o.length&&(g.attr("crossOrigin","").on("load cached",function(){var e,o;if(e=g.width(),o=g.height(),e>0&&o>0){var d,u,i=a("<canvas/>"),c=i[0].getContext("2d");i.attr({width:e,height:o}),c.fillStyle="rgb(255, 255, 255)",c.fillRect(0,0,e,o),c.drawImage(g[0],0,0,e,o),g.remove();try{d=c.getImageData(0,0,e,o),u=t[n.type](d),r.css("background-color","rgb("+u.r+", "+u.g+", "+u.b+")")}catch(t){a.error(t.message+"(jQuery.fillcolor)")}}else g.remove()}).on("abort error",function(){g.remove()}).css("display","none").attr("src",o.attr("src")),e.append(g))})}}(jQuery);
//# sourceMappingURL=jquery.fillcolor.1.1.0.min.js.map